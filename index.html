<!doctype html>
<html lang="pt">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Minist√©rio Prof√©tico Assembleia Livre</title>
    <meta name="theme-color" content="#0a0a0a" />
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='50' fill='%230a0a0a'/%3E%3Ctext x='50' y='60' text-anchor='middle' font-size='54' fill='white'%3EMP%3C/text%3E%3C/svg%3E">
    <!-- Tailwind (CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React 18 (UMD) + ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel to transpile JSX in the browser -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
      html.dark { color-scheme: dark; }
    </style>
  </head>
  <body class="min-h-screen bg-white dark:bg-zinc-950 text-zinc-900 dark:text-zinc-100">
    <div id="root"></div>

    <script type="text/babel">
      const { useEffect, useMemo, useState } = React;

      // ====== Config ======
      const links = {
        whatsapp: "https://wa.me/SEU_NUMERO_OU_LINK_DO_GRUPO",
        facebook: "https://facebook.com/SUA_PAGINA",
        youtube: "https://youtube.com/@SEU_CANAL",
        telefone: "tel:+SEU_TELEFONE",
      };

      const versiculos = [
        { texto: "O Senhor √© o meu pastor; nada me faltar√°.", ref: "Salmos 23:1" },
        { texto: "Porque Deus amou o mundo de tal maneira que deu o seu Filho unig√™nito‚Ä¶", ref: "Jo√£o 3:16" },
        { texto: "Clama a mim, e responder-te-ei, e anunciar-te-ei coisas grandes e firmes‚Ä¶", ref: "Jeremias 33:3" },
        { texto: "Tudo posso naquele que me fortalece.", ref: "Filipenses 4:13" },
      ];

      const demoGaleria = [
        { src: "https://images.unsplash.com/photo-1504051771394-dd2e66b2e08f?q=80&w=1200&auto=format&fit=crop", legenda: "Culto de Louvor" },
        { src: "https://images.unsplash.com/photo-1556909212-d5d88e9218df?q=80&w=1200&auto=format&fit=crop", legenda: "Minist√©rio de Ora√ß√£o" },
        { src: "https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?q=80&w=1200&auto=format&fit=crop", legenda: "Batismos" },
      ];

      const Tabs = {
        INICIO: "In√≠cio",
        TESTEMUNHOS: "Testemunhos",
        ORACAO: "Pedidos de Ora√ß√£o",
        ANUNCIOS: "An√∫ncios",
        GALERIA: "Galeria",
      };

      // ====== Utils ======
      function useLocalArray(key) {
        const [data, setData] = useState(() => {
          try {
            const raw = localStorage.getItem(key);
            return raw ? JSON.parse(raw) : [];
          } catch {
            return [];
          }
        });
        useEffect(() => {
          localStorage.setItem(key, JSON.stringify(data));
        }, [key, data]);
        return [data, setData];
      }

      // ====== UI ======
      function Nav({ current, onChange }) {
        const items = [
          { id: Tabs.INICIO, label: Tabs.INICIO, icon: "üìñ" },
          { id: Tabs.TESTEMUNHOS, label: Tabs.TESTEMUNHOS, icon: "üí¨" },
          { id: Tabs.ORACAO, label: Tabs.ORACAO, icon: "üôè" },
          { id: Tabs.ANUNCIOS, label: Tabs.ANUNCIOS, icon: "üì£" },
          { id: Tabs.GALERIA, label: Tabs.GALERIA, icon: "üñºÔ∏è" },
        ];
        const [open, setOpen] = useState(false);
        return (
          <div className="sticky top-0 z-40 bg-white/80 dark:bg-zinc-900/80 backdrop-blur border-b">
            <div className="max-w-5xl mx-auto px-4 py-3 flex items-center justify-between">
              <div className="flex items-center gap-3">
                <div className="w-9 h-9 rounded-full bg-zinc-900 text-white dark:bg-white dark:text-zinc-900 grid place-items-center font-bold">MP</div>
                <div className="leading-tight">
                  <h1 className="font-extrabold text-lg">Minist√©rio Prof√©tico Assembleia Livre</h1>
                  <p className="text-xs opacity-70">Para sempre ‚Äì App Oficial</p>
                </div>
              </div>
              <div className="hidden md:flex gap-2">
                {items.map(it => (
                  <button key={it.id} onClick={() => onChange(it.id)}
                    className={\`px-3 py-2 rounded-2xl text-sm font-medium hover:shadow \${current===it.id?"bg-zinc-900 text-white dark:bg-zinc-100 dark:text-zinc-900":"bg-zinc-100 dark:bg-zinc-800"}\`}>
                    <span className="inline-flex items-center gap-2"><span>{it.icon}</span>{it.label}</span>
                  </button>
                ))}
              </div>
              <div className="md:hidden">
                <button className="p-2 rounded-xl bg-zinc-100 dark:bg-zinc-800" onClick={()=>setOpen(v=>!v)} aria-label="Menu">
                  {open ? "‚úñÔ∏è" : "‚ò∞"}
                </button>
              </div>
            </div>
            <div className={\`md:hidden transition-grid grid \${open?"grid-rows-[1fr]":"grid-rows-[0fr]"}\`}>
              <div className="overflow-hidden">
                <div className="px-4 pb-4 flex flex-col gap-2">
                  {items.map(it => (
                    <button key={it.id} onClick={() => { onChange(it.id); setOpen(false); }}
                      className={\`px-3 py-2 rounded-2xl text-sm font-medium text-left \${current===it.id?"bg-zinc-900 text-white dark:bg-zinc-100 dark:text-zinc-900":"bg-zinc-100 dark:bg-zinc-800"}\`}>
                      <span className="inline-flex items-center gap-2"><span>{it.icon}</span>{it.label}</span>
                    </button>
                  ))}
                </div>
              </div>
            </div>
          </div>
        );
      }

      function VersiculoDoDia() {
        const versiculo = useMemo(() => versiculos[Math.floor(Math.random()*versiculos.length)], []);
        return (
          <div className="rounded-2xl p-5 bg-gradient-to-br from-zinc-100 to-white dark:from-zinc-800 dark:to-zinc-900 shadow animate-[fadeIn_0.4s_ease]">
            <p className="text-lg leading-relaxed">‚Äú{versiculo.texto}‚Äù</p>
            <p className="mt-2 text-sm opacity-70">‚Äî {versiculo.ref}</p>
          </div>
        );
      }

      function Inicio() {
        return (
          <div className="space-y-6">
            <VersiculoDoDia/>
            <div className="grid md:grid-cols-3 gap-4">
              <a href={links.whatsapp} target="_blank" rel="noreferrer" className="rounded-2xl p-4 bg-zinc-100 dark:bg-zinc-800 hover:shadow flex items-center gap-3">
                <span>üìû</span><div>
                  <p className="font-semibold">Grupo de Ora√ß√£o (WhatsApp)</p>
                  <p className="text-sm opacity-70">Participe do grupo e envie pedidos.</p>
                </div>
              </a>
              <a href={links.facebook} target="_blank" rel="noreferrer" className="rounded-2xl p-4 bg-zinc-100 dark:bg-zinc-800 hover:shadow flex items-center gap-3">
                <span>üìò</span><div>
                  <p className="font-semibold">P√°gina do Facebook</p>
                  <p className="text-sm opacity-70">Acompanhe as novidades e cultos.</p>
                </div>
              </a>
              <a href={links.youtube} target="_blank" rel="noreferrer" className="rounded-2xl p-4 bg-zinc-100 dark:bg-zinc-800 hover:shadow flex items-center gap-3">
                <span>‚ñ∂Ô∏è</span><div>
                  <p className="font-semibold">Canal do YouTube</p>
                  <p className="text-sm opacity-70">Mensagens e transmiss√µes.</p>
                </div>
              </a>
            </div>
            <div className="rounded-2xl p-5 bg-zinc-50 dark:bg-zinc-800/60 border">
              <h3 className="font-semibold text-lg mb-2">Sobre</h3>
              <p className="text-sm opacity-80">Bem-vindos ao aplicativo oficial do Minist√©rio Prof√©tico Assembleia Livre para sempre. Aqui voc√™ encontra testemunhos, pedidos de ora√ß√£o, an√∫ncios e a galeria de fotos da igreja.</p>
            </div>
          </div>
        );
      }

      function FormCartao({ title, subtitle, onSubmit, fields, cta="Enviar" }) {
        const [values, setValues] = useState(() => Object.fromEntries(fields.map(f=>[f.name,""])));
        const [enviado, setEnviado] = useState(false);
        return (
          <form onSubmit={e=>{e.preventDefault(); onSubmit(values); setValues(Object.fromEntries(fields.map(f=>[f.name,""]))); setEnviado(true); setTimeout(()=>setEnviado(false), 1500);}} className="rounded-2xl p-5 bg-white dark:bg-zinc-900 shadow border space-y-3">
            <h3 className="font-semibold text-lg">{title}</h3>
            {subtitle && <p className="text-sm opacity-70">{subtitle}</p>}
            <div className="grid md:grid-cols-2 gap-3">
              {fields.map(f => (
                <div key={f.name} className="md:col-span-1 col-span-2">
                  {f.type !== "textarea" ? (
                    <input required={f.required} type={f.type||"text"} placeholder={f.placeholder}
                      value={values[f.name]}
                      onChange={e=>setValues(v=>({...v,[f.name]:e.target.value}))}
                      className="w-full px-3 py-2 rounded-xl bg-zinc-100 dark:bg-zinc-800 outline-none"/>
                  ) : (
                    <textarea required={f.required} placeholder={f.placeholder} rows={4}
                      value={values[f.name]}
                      onChange={e=>setValues(v=>({...v,[f.name]:e.target.value}))}
                      className="w-full px-3 py-2 rounded-xl bg-zinc-100 dark:bg-zinc-800 outline-none"/>
                  )}
                </div>
              ))}
            </div>
            <button type="submit" className="inline-flex items-center gap-2 px-4 py-2 rounded-2xl bg-zinc-900 text-white dark:bg-zinc-100 dark:text-zinc-900 font-semibold">
              <span>üì§</span>{enviado?"Enviado!":cta}
            </button>
          </form>
        );
      }

      function Testemunhos() {
        const [items, setItems] = useLocalArray("mpal_testemunhos");
        return (
          <div className="space-y-4">
            <FormCartao
              title="Compartilhe seu Testemunho"
              subtitle="Edifique a igreja contando o que Deus fez."
              onSubmit={(v)=> setItems(prev=>[{...v, data:new Date().toISOString()}, ...prev])}
              fields={[
                { name:"nome", placeholder:"Seu nome", required:true },
                { name:"titulo", placeholder:"T√≠tulo do testemunho", required:true },
                { name:"mensagem", placeholder:"Escreva seu testemunho", type:"textarea", required:true },
              ]}
              cta="Publicar"
            />
            <div className="space-y-3">
              {items.length===0 && <p className="opacity-70 text-sm">Nenhum testemunho ainda.</p>}
              {items.map((t, i)=> (
                <div key={i} className="rounded-2xl p-4 bg-zinc-50 dark:bg-zinc-800/60 border">
                  <h4 className="font-semibold">{t.titulo}</h4>
                  <p className="text-sm mt-1 whitespace-pre-wrap">{t.mensagem}</p>
                  <p className="text-xs opacity-60 mt-2">‚Äî {t.nome} ‚Ä¢ {new Date(t.data).toLocaleString()}</p>
                </div>
              ))}
            </div>
          </div>
        );
      }

      function Oracao() {
        const [items, setItems] = useLocalArray("mpal_oracao");
        return (
          <div className="space-y-4">
            <FormCartao
              title="Pedido de Ora√ß√£o"
              subtitle="Escreva seu pedido. A equipe e o grupo de ora√ß√£o interceder√£o por voc√™."
              onSubmit={(v)=> setItems(prev=>[{...v, data:new Date().toISOString()}, ...prev])}
              fields={[
                { name:"nome", placeholder:"Seu nome", required:true },
                { name:"contato", placeholder:"WhatsApp ou e-mail (opcional)", required:false },
                { name:"pedido", placeholder:"Descreva seu pedido de ora√ß√£o", type:"textarea", required:true },
              ]}
              cta="Enviar pedido"
            />
            <div className="space-y-3">
              {items.length===0 && <p className="opacity-70 text-sm">Nenhum pedido enviado ainda. Voc√™ pode compartilhar tamb√©m no grupo do WhatsApp.</p>}
              {items.map((t, i)=> (
                <div key={i} className="rounded-2xl p-4 bg-zinc-50 dark:bg-zinc-800/60 border">
                  <h4 className="font-semibold">{t.nome}</h4>
                  <p className="text-sm mt-1 whitespace-pre-wrap">{t.pedido}</p>
                  <p className="text-xs opacity-60 mt-2">{t.contato && <>Contato: {t.contato} ‚Ä¢ </>}{new Date(t.data).toLocaleString()}</p>
                </div>
              ))}
            </div>
          </div>
        );
      }

      function Anuncios() {
        const [items, setItems] = useLocalArray("mpal_anuncios");
        return (
          <div className="space-y-4">
            <FormCartao
              title="Anunciar algo"
              subtitle="Eventos, vendas solid√°rias, oportunidades de servi√ßo, etc."
              onSubmit={(v)=> setItems(prev=>[{...v, data:new Date().toISOString()}, ...prev])}
              fields={[
                { name:"nome", placeholder:"Seu nome", required:true },
                { name:"assunto", placeholder:"Assunto do an√∫ncio", required:true },
                { name:"conteudo", placeholder:"Detalhes do an√∫ncio", type:"textarea", required:true },
              ]}
              cta="Publicar an√∫ncio"
            />
            <div className="space-y-3">
              {items.length===0 && <p className="opacity-70 text-sm">Nenhum an√∫ncio ainda.</p>}
              {items.map((t, i)=> (
                <div key={i} className="rounded-2xl p-4 bg-zinc-50 dark:bg-zinc-800/60 border">
                  <h4 className="font-semibold">{t.assunto}</h4>
                  <p className="text-sm mt-1 whitespace-pre-wrap">{t.conteudo}</p>
                  <p className="text-xs opacity-60 mt-2">‚Äî {t.nome} ‚Ä¢ {new Date(t.data).toLocaleString()}</p>
                </div>
              ))}
            </div>
          </div>
        );
      }

      function Galeria() {
        const [fotos, setFotos] = useState(demoGaleria);
        const [novo, setNovo] = useState({ url:"", legenda:"" });
        return (
          <div className="space-y-4">
            <div className="rounded-2xl p-5 bg-white dark:bg-zinc-900 shadow border">
              <h3 className="font-semibold text-lg mb-2">Adicionar foto (URL)</h3>
              <div className="grid md:grid-cols-3 gap-2">
                <input value={novo.url} onChange={e=>setNovo(v=>({...v,url:e.target.value}))} placeholder="https://‚Ä¶" className="px-3 py-2 rounded-xl bg-zinc-100 dark:bg-zinc-800"/>
                <input value={novo.legenda} onChange={e=>setNovo(v=>({...v,legenda:e.target.value}))} placeholder="Legenda" className="px-3 py-2 rounded-xl bg-zinc-100 dark:bg-zinc-800"/>
                <button onClick={()=>{ if(!novo.url) return; setFotos(prev=>[{src:novo.url, legenda:novo.legenda||""}, ...prev]); setNovo({url:"",legenda:""}); }} className="px-4 py-2 rounded-2xl bg-zinc-900 text-white dark:bg-zinc-100 dark:text-zinc-900 font-semibold">Adicionar</button>
              </div>
            </div>
            <div className="grid sm:grid-cols-2 md:grid-cols-3 gap-4">
              {fotos.map((f, i)=> (
                <figure key={i} className="overflow-hidden rounded-2xl border bg-zinc-50 dark:bg-zinc-800/60">
                  <img src={f.src} alt={f.legenda||\`Foto \${i+1}\`} className="w-full h-56 object-cover"/>
                  {f.legenda && <figcaption className="p-2 text-sm opacity-80">{f.legenda}</figcaption>}
                </figure>
              ))}
            </div>
          </div>
        );
      }

      function Rodape() {
        return (
          <footer className="mt-10 py-8 text-center opacity-70 text-sm">
            ¬© {new Date().getFullYear()} Minist√©rio Prof√©tico Assembleia Livre ‚Äî Todos os direitos reservados.
          </footer>
        );
      }

      function App() {
        const [tab, setTab] = useState(Tabs.INICIO);
        const [dark, setDark] = useState(() => window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches);

        useEffect(()=>{
          document.documentElement.classList.toggle("dark", dark);
        }, [dark]);

        return (
          <div className="min-h-screen">
            <Nav current={tab} onChange={setTab}/>

            <main className="max-w-5xl mx-auto px-4 py-6">
              <div className="flex justify-end mb-4">
                <button onClick={()=>setDark(v=>!v)} className="px-3 py-1 rounded-xl bg-zinc-100 dark:bg-zinc-800 text-sm">{dark?"Modo claro":"Modo escuro"}</button>
              </div>
              {tab===Tabs.INICIO && <Inicio/>}
              {tab===Tabs.TESTEMUNHOS && <Testemunhos/>}
              {tab===Tabs.ORACAO && <Oracao/>}
              {tab===Tabs.ANUNCIOS && <Anuncios/>}
              {tab===Tabs.GALERIA && <Galeria/>}
              <Rodape/>
            </main>
          </div>
        );
      }

      // Render
      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(<App/>);

      // Simple fade-in keyframes
      const style = document.createElement('style');
      style.innerHTML = \`
        @keyframes fadeIn { from { opacity: 0; transform: translateY(6px);} to { opacity: 1; transform: translateY(0);} }
      \`;
      document.head.appendChild(style);
    </script>
  </body>
</html>
